<div class="flashcard-content">
	<div class="prompt-section">
		<p class="prompt-label">Prompt (<span id="prompt-script">{{ item.prompt_script }}</span>)</p>
		<div class="prompt-value" id="prompt-display">
			{% if item.prompt_script == 'kanji' and settings.show_furigana %}
				{% if settings.furigana_style == 'html' and item.furigana_html %}
					<div class="kanji-with-furigana">{{ item.furigana_html|safe }}</div>
				{% elif settings.furigana_style == 'text' and item.furigana_text %}
					<div class="kanji-with-furigana-text">{{ item.furigana_text }}</div>
				{% else %}
					<div class="kanji">{{ item.prompt }}</div>
				{% endif %}
			{% else %}
				<div class="prompt-text">{{ item.prompt }}</div>
			{% endif %}
		</div>
		{% if item.fallback_used %}
			<div class="fallback-notice" style="font-size: 0.8em; color: #666; margin-top: 5px;">
				⚠️ Fallback content used
			</div>
		{% endif %}
	</div>
	
	<div class="answer-section">
		<!-- Input fields will be dynamically created by JavaScript -->
	</div>
	
	<input type="hidden" id="item_id" name="item_id" value="{{ item.index }}">

	<div class="actions-section">
		<button type="button" class="check-button" id="checkButton" disabled>Check Answer</button>
		<div class="branding-tooltip">powered by Benky-fy</div>
		<div class="feedback-message" id="feedbackMessage" style="display: none;"></div>
	</div>

	<!-- Always render the results container -->
	<div class="results-container">
		<!-- Initial content can be empty or a placeholder -->
	</div>

	{% if results is not none %}
	<div class="overall-result {{ 'correct' if all_correct else 'incorrect' }}">
		<p><strong>{{ 'All Correct!' if all_correct else 'Some Incorrect' }}</strong></p>
	</div>
	{% endif %}
</div>
