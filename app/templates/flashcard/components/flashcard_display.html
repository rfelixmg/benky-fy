<div class="flashcard-content">
	<div class="prompt-section">
		<div class="prompt-header">
			<p class="prompt-label">Prompt (<span id="prompt-script">hiragana</span>)</p>
			<button type="button" class="help-button" id="helpButton" title="Show word information">
				<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<circle cx="12" cy="12" r="10"></circle>
					<path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
					<line x1="12" y1="17" x2="12.01" y2="17"></line>
				</svg>
			</button>
		</div>
		<div class="prompt-value" id="prompt-display">
			{% if item.prompt_script == 'kanji' and settings.show_furigana %}
				{% if settings.furigana_style == 'html' and item.furigana_html %}
					<div class="kanji-with-furigana">{{ item.furigana_html|safe }}</div>
				{% elif settings.furigana_style == 'text' and item.furigana_text %}
					<div class="kanji-with-furigana-text">{{ item.furigana_text }}</div>
				{% else %}
					<div class="kanji">{{ item.prompt }}</div>
				{% endif %}
			{% else %}
				<div class="prompt-text">{{ item.prompt }}</div>
			{% endif %}
		</div>
		{% if item.fallback_used %}
			<div class="fallback-notice" style="font-size: 0.8em; color: #666; margin-top: 5px;">
				⚠️ Fallback content used
			</div>
		{% endif %}
	</div>
	
	<div class="answer-section">
		<!-- Input fields will be dynamically created by JavaScript -->
	</div>
	
	<input type="hidden" id="item_id" name="item_id" value="{{ item.index }}">

	<div class="actions-section">
		<button type="button" class="check-button" id="checkButton" disabled>Check Answer</button>
		<div class="branding-tooltip">powered by Benky-fy</div>
		<div class="feedback-message" id="feedbackMessage" style="display: none;"></div>
	</div>

	<!-- Always render the results container -->
	<div class="results-container">
		<!-- Initial content can be empty or a placeholder -->
	</div>

	{% if results is not none %}
	<div class="overall-result {{ 'correct' if all_correct else 'incorrect' }}">
		<p><strong>{{ 'All Correct!' if all_correct else 'Some Incorrect' }}</strong></p>
	</div>
	{% endif %}
</div>

<!-- Help Modal -->
<div class="help-modal" id="helpModal" style="display: none;">
	<div class="help-modal-content">
		<div class="help-modal-header">
			<h3>Word Information</h3>
			<button type="button" class="help-close-btn" id="helpCloseBtn" title="Close">✕</button>
		</div>
		<div class="help-modal-body" id="helpModalBody">
			<!-- Content will be populated by JavaScript -->
		</div>
	</div>
</div>
