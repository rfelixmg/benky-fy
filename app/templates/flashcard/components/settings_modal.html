<!-- Floating Settings Modal -->
<div class="settings-modal" id="settingsModal">
	<div class="settings-modal-content">
		<div class="settings-modal-header">
			<h2>Settings</h2>
			<button class="settings-close-btn" title="Close">âœ•</button>
		</div>
		<div class="settings-body">
			<!-- Practice Mode Toggle - Top Level -->
			<div class="practice-mode-toggle">
				<h4>Practice Mode</h4>
				<div class="radio-group practice-mode-options">
					<label class="radio-option">
						<input type="radio" name="practice_mode" value="flashcard" checked>
						<span>ğŸ“š Flashcard</span>
					</label>
					<label class="radio-option">
						<input type="radio" name="practice_mode" value="conjugation">
						<span>ğŸ”„ Conjugation</span>
					</label>
				</div>
			</div>

			<!-- Flashcard Display Mode Section -->
			<div class="settings-section" id="flashcard-display-section">
				<div class="settings-section-header">
					<h3>Flashcard Display Mode</h3>
					<span class="section-toggle">â–¼</span>
				</div>
				<div class="settings-section-content" id="flashcard-display">
					<div class="radio-group">
						<label class="radio-option">
							<input type="radio" name="display_mode" value="kana" checked>
							<span>Kana</span>
						</label>
						<label class="radio-option">
							<input type="radio" name="display_mode" value="kanji">
							<span>Kanji</span>
						</label>
						<label class="radio-option">
							<input type="radio" name="display_mode" value="kanji_furigana">
							<span>Kanji + Furigana</span>
						</label>
						<label class="radio-option">
							<input type="radio" name="display_mode" value="english">
							<span>English</span>
						</label>
						<label class="radio-option">
							<input type="radio" name="display_mode" value="weighted">
							<span>ğŸ”„ Weighted Display</span>
						</label>
					</div>
					
					<!-- Kana Sub-toggle -->
					<div class="kana-toggle-panel" id="kana-toggle-panel" style="display: block;">
						<h4>Kana Type</h4>
						<div class="radio-group kana-sub-group">
							<label class="radio-option">
								<input type="radio" name="kana_type" value="hiragana" checked>
								<span>Hiragana</span>
							</label>
							<label class="radio-option">
								<input type="radio" name="kana_type" value="katakana">
								<span>Katakana</span>
							</label>
						</div>
					</div>
					
					<!-- Furigana Style Sub-panel (for Kanji + Furigana) -->
					<div class="weighted-panel" id="furigana-style-panel" style="display: none;">
						<h4>Furigana Style</h4>
					<label class="select-label">
							<span>Furigana Style</span>
							<select id="furigana-style">
								<option value="hover">Hover (tooltip on kanji)</option>
								<option value="inline">Inline (above or beside)</option>
								<option value="brackets">Brackets (e.g., é£Ÿ[ãŸ]ã¹ã‚‹)</option>
								<option value="ruby" selected>Ruby (default browser <ruby>)</option>
						</select>
					</label>
					</div>
					
					<!-- Weighted Display Sub-panel -->
					<div class="weighted-panel" id="weighted-panel" style="display: none;">
						<h4>Display Weights</h4>
						<div class="slider-group">
							<label class="slider-label">
								<span>Kana</span>
								<input type="range" min="0" max="1" step="0.1" value="0.3" class="weight-slider" data-type="kana">
								<span class="slider-value">0.3</span>
							</label>
							<label class="slider-label">
								<span>Kanji</span>
								<input type="range" min="0" max="1" step="0.1" value="0.3" class="weight-slider" data-type="kanji">
								<span class="slider-value">0.3</span>
							</label>
							<label class="slider-label">
								<span>Kanji + Furigana</span>
								<input type="range" min="0" max="1" step="0.1" value="0.2" class="weight-slider" data-type="kanji_furigana">
								<span class="slider-value">0.2</span>
							</label>
							<label class="slider-label">
								<span>English</span>
								<input type="range" min="0" max="1" step="0.1" value="0.2" class="weight-slider" data-type="english">
								<span class="slider-value">0.2</span>
					</label>
						</div>
					</div>
				</div>
			</div>

			<!-- Conjugation Settings Section -->
			<div class="settings-section" id="conjugation-settings-section" style="display: none;">
				<div class="settings-section-header">
					<h3>Conjugation Settings</h3>
					<span class="section-toggle">â–¼</span>
				</div>
				<div class="settings-section-content" id="conjugation-settings">
					<div class="checkbox-group">
						<h4>Conjugation Forms</h4>
						<label class="checkbox-option">
							<input type="checkbox" name="conjugation_forms" value="polite" checked>
							<span>Polite (ã¾ã™ form)</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="conjugation_forms" value="negative">
							<span>Negative (ãªã„ form)</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="conjugation_forms" value="polite_negative">
							<span>Polite Negative (ã¾ã›ã‚“)</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="conjugation_forms" value="past">
							<span>Past (ãŸ form)</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="conjugation_forms" value="polite_past">
							<span>Polite Past (ã¾ã—ãŸ)</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="conjugation_forms" value="past_negative">
							<span>Past Negative (ãªã‹ã£ãŸ)</span>
						</label>
					</div>
					
					<div class="radio-group conjugation-prompt-style-group">
						<h4>Prompt Style</h4>
						<div class="prompt-style-options">
							<label class="radio-option">
								<input type="radio" name="conjugation_prompt_style" value="english" checked>
								<span>English</span>
							</label>
							<label class="radio-option">
								<input type="radio" name="conjugation_prompt_style" value="kanji">
								<span>Kanji</span>
							</label>
							<label class="radio-option">
								<input type="radio" name="conjugation_prompt_style" value="furigana">
								<span>Furigana</span>
							</label>
						</div>
					</div>
					
					<div class="helper-text">
						<p>Select which conjugation forms to practice and how prompts are displayed.</p>
					</div>
				</div>
			</div>

			<!-- Answer Input Mode Section -->
			<div class="settings-section" id="answer-input-section">
				<div class="settings-section-header">
					<h3>Answer Input Mode</h3>
					<span class="section-toggle">â–¼</span>
				</div>
				<div class="settings-section-content" id="answer-input">
					<div class="checkbox-group">
						<label class="checkbox-option">
							<input type="checkbox" name="input_modes" value="hiragana" checked>
							<span>Hiragana (romaji input â†’ auto-converts to kana)</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="input_modes" value="romaji">
							<span>Romaji (as typed)</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="input_modes" value="katakana">
							<span>Katakana</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="input_modes" value="kanji">
							<span>Kanji</span>
						</label>
						<label class="checkbox-option">
							<input type="checkbox" name="input_modes" value="english">
							<span>English</span>
					</label>
					</div>
					<div class="helper-text">
						<p>You can select more than one. Your answer will be accepted if it matches any selected type.</p>
					</div>
				</div>
			</div>

			
			<div class="settings-actions">
				<button type="button" class="btn btn-primary" id="saveSettingsBtn">Save Settings</button>
				<button type="button" class="btn btn-secondary" id="resetSettingsBtn">Reset to Defaults</button>
			</div>
		</div>
	</div>
</div>
