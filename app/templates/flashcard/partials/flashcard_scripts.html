<script src="{{ url_for('static', filename='js/utils.js') }}"></script>

<script>
// Template variables
const templateSettings = {
	inputModes: ["hiragana"],
	checkingStyles: ["hiragana"] // fallback for compatibility
};

// Settings management
function toggleSettings() {
	const settingsModal = document.getElementById('settingsModal');
	if (settingsModal) {
		settingsModal.classList.toggle('show');
	}
}

// Close modal when clicking outside
document.addEventListener('click', function(event) {
	const settingsModal = document.getElementById('settingsModal');
	const settingsModalContent = document.querySelector('.settings-modal-content');
	
	if (settingsModal && settingsModal.classList.contains('show')) {
		if (!settingsModalContent.contains(event.target) && !event.target.closest('.settings-toggle-btn')) {
			settingsModal.classList.remove('show');
		}
	}
});

// Settings state management
let settingsState = {
	displayMode: 'kana',
	kanaTypes: ['hiragana'],
	inputModes: ['hiragana'],
	furiganaStyle: 'ruby',
	weights: {
		kana: 0.3,
		kanji: 0.3,
		kanji_furigana: 0.2,
		english: 0.2
	}
};

// Track user interactions to prevent API calls on page load
let isUserInteraction = false;
let isPageLoaded = false;

// Basic functionality - more complex JavaScript will be added
document.addEventListener('DOMContentLoaded', function() {
	isPageLoaded = true;
	console.log('Flashcard page loaded');
});
</script>
